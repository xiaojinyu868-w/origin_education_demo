# 需求文档

## 介绍
演示版本的目标是在 10 分钟内向观众展示“试卷接入 → AI 批改 → 人工复核 → 成绩洞察 → 练习建议”的闭环能力，突出 AI 与教师协同批改的价值，同时支持一键重置和 Mock 数据以便多次演示。

## 需求

### 需求 1 - 演示入口与流程提示

**用户故事：** 作为演示负责人，我希望在进入系统时立即看到关键步骤和 CTA，以便快速带领观众进入流程。

#### 验收标准

1. When 演示者点击首页 CTA 时，the Demo 系统 shall 创建新的 Demo Session 并跳转到 `/demo/wizard?step=1`，同时在顶部显示进度条。
2. While 已存在未完成 Session，when 演示者访问首页时，the Demo 系统 shall 显示“继续演示”按钮并提示剩余步骤。
3. While 首页资源检查未通过，when 演示者进入首页时，the Demo 系统 shall 以提示条的方式列出缺失素材（示例试卷/学生卷等）。

### 需求 2 - 试卷接入（Step1）

**用户故事：** 作为演示负责人，我希望选择内置示例试卷或上传新文件，并立即看到 AI 解析的题目结构。

#### 验收标准

1. When 演示者选择“示例试卷”卡片时，the Demo 系统 shall 加载预置试卷并展示题目、题型、分值、答案草案预览。
2. When 演示者上传 PNG/JPG/PDF 文件时，the Demo 系统 shall 调用解析服务并返回结构化题目列表；若失败则提示重试或改用示例试卷。
3. While 解析成功，when 演示者点击“下一步”时，the Demo 系统 shall 将解析结果保存为当前 Demo Session 的试卷数据。

### 需求 3 - 答案校对（Step2）

**用户故事：** 作为演示负责人，我希望快速确认或调整标准答案，让观众理解人机协作。

#### 验收标准

1. When 演示者点击“一键确认”时，the Demo 系统 shall 将所有题目标记为已确认并更新进度条。
2. When 演示者逐题点击“确认并下一题”时，the Demo 系统 shall 记录确认状态、剩余题目数量，并支持回退到上一题。
3. When 演示者修改答案内容时，the Demo 系统 shall 立即保存修改结果并在后续批改中使用调整后的答案。

### 需求 4 - AI 批改与复核（Step3/4）

**用户故事：** 作为演示负责人，我希望展示学生卷上传、AI 自动批改、人工复核的全过程。

#### 验收标准

1. When 演示者上传示例学生卷时，the Demo 系统 shall 展示处理队列、题号匹配度、OCR 置信度，并在批改完成后立即展示结果。
2. While 批改结果可用，when 演示者查看学生列表时，the Demo 系统 shall 显示总分、每题得分、AI 评语和置信度标签，并将低置信度条目置顶。
3. When 演示者打开题目抽屉并修改分数或备注时，the Demo 系统 shall 记录操作并写入 Processing Log 以支持回放。
4. When 演示者点击“全部通过”或“存在疑问”按钮时，the Demo 系统 shall 批量更新当前学生的状态并在界面上突出显示。

### 需求 5 - 成绩洞察快照（Step5）

**用户故事：** 作为演示负责人，我希望用一页可视化让观众理解批改结果对教学的价值。

#### 验收标准

1. When 演示者进入洞察页时，the Demo 系统 shall 展示班级概览卡片（平均分、最高分、错题最多的题）以及知识点 Top3 图表。
2. When 演示者点击学生榜单时，the Demo 系统 shall 弹出学生抽屉，展示错题列表、AI 摘要和推荐练习（可使用占位文本）。
3. When 演示者点击“导出演示报告”时，the Demo 系统 shall 生成或下载预置的 PDF 占位文件，并提示成功。

### 需求 6 - 练习建议预览

**用户故事：** 作为演示负责人，我希望展示如何基于错题生成练习建议，而无需完整练习发布流程。

#### 验收标准

1. When 演示者打开练习建议区域时，the Demo 系统 shall 展示题目名称、知识点、推荐学生、难度标签。
2. When 演示者点击“生成练习 PDF”按钮时，the Demo 系统 shall 下载示例练习文件并提示“已生成样例练习”。
3. When 演示者需要展示学生端入口时，the Demo 系统 shall 显示二维码或链接，指向静态示例页。

### 需求 7 - 历史记录与回放

**用户故事：** 作为演示负责人，我希望在演示后回放整个流程并可随时重新进入复核阶段。

#### 验收标准

1. When 演示者访问 `/demo/history` 时，the Demo 系统 shall 列出最近 Demo 批次的试卷名称、时间、学生数、状态。
2. When 演示者查看历史详情时，the Demo 系统 shall 展示处理日志时间线、练习摘要、导出记录，并允许下载日志文件。
3. When 演示者点击“重新打开本次演示”时，the Demo 系统 shall 恢复 Session 并跳转到复核界面。

### 需求 8 - 演示环境配置与复位

**用户故事：** 作为演示负责人，我需要在演示前快速重置环境并检查当前使用的模型配置。

#### 验收标准

1. When 演示者访问 `/demo/setup` 时，the Demo 系统 shall 显示当前 LLM Key、模型名称、Mock 开关状态以及最近重置时间。
2. When 演示者点击“一键重置 Demo 数据”时，the Demo 系统 shall 清空相关表、导入示例数据并写入重置日志。
3. When 演示者切换 Mock 模式开关时，the Demo 系统 shall 立即更新配置并提示切换结果。
