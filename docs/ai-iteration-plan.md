# AI 功能迭代方案提案

## 当前流程速览
1. 上传试卷后，调用通义千问完成题号与批注识别，失败时回退 EasyOCR。
2. 生成批改结果：客观题走规则库，简答题调用大模型评分并返回解释，教师批注继续保留人工可控。
3. 系统同步错题库，生成个性化练习卷，同时在前端抽屉展示处理步骤、AI 总结与置信度。

## 一线痛点洞察
- **高峰批改延迟**：大模型串行调用会增加响应时间，缺乏进度感知与异步处理策略。
- **答案结构不统一**：题干/答案规范依赖教师自觉维护，缺少模板化工具降低建卷成本。
- **错题跟进反馈不足**：教师无法快速查看学生对 AI 建议的执行情况，也缺少班级层面的错题整改节奏提示。
- **数据闭环不完整**：AI 判错后没有自动推送复盘任务，练习完成与错题消散缺乏自动化追踪。

## 功能性迭代建议
1. **异步批改管线与状态订阅**
   - 将上传请求拆分为“接收任务 + 异步处理 + WebSocket/轮询通知”，支持批量与高峰期扩展。
   - 增加处理阶段耗时监控与失败自动重试，保障教师体验稳定。
2. **题目建模增强与模板库**
   - 提供“题库模板向导”，调用大模型生成标准化题干、答案、评分 rubric，减少教师配置时间。
   - 引入题目版本控制与多学科标签，为后续跨学科分析奠定数据结构基础。
3. **闭环错题跟进与监督报告**
   - 针对 AI 识别的错题自动下发复习任务，支持学生提交整改说明，大模型点评二次反馈。
   - 在班级驾驶舱中新增“错题清零率”“AI 建议落实率”等指标，帮助教师掌握执行效果。
4. **教学助手与场景化建议**
   - 结合批改摘要与学生画像，由大模型生成课堂讲评提纲、分层作业建议，为教师提供“拿来即用”的教案片段。

## 验证与评估指标
- 批改耗时：P95 控制在 8s 内（异步后统计从提交到完成的总时长）。
- 简答题评分一致性：与教研专家人工评分的平均误差 < 0.5 分。
- 错题整改完成度：两周内错题清零率提升 30%。
- 教师满意度：通过内测问卷收集 NPS≥8 的认可度。

## 技术前置条件
- 接入消息队列（如 Redis + RQ/Celery）和 WebSocket 通道。
- 设计题目与错题的变更审计记录，方便追踪与回滚。
- 评估大模型调用成本，必要时引入缓存或批量评估策略。
