# AI 赋能试卷批改平台整体方案

## 愿景
构建一套端到端的智能批改与学情分析平台，让教师可以快速完成客观题批改、同步主观题批注，学生自动获得错题归档与个性化练习卷，管理者掌握班级薄弱知识点分布，实现精准教学。

## 系统核心模块
- **影像采集与 OCR 管道**：接收任意格式试卷照片/扫描件，完成去噪纠偏、分题切块、识别学生答案与教师批注符号。
- **自动评分引擎**：依据题目答案与评分规则对选择/填空题即时判分，主观题读取教师??或分数批注，支持人工覆核。
- **题库与知识图谱**：题目绑定知识点、题型、难度，为错题归类及练习生成提供语义支撑。
- **错题管理中心**：沉淀学生个人错题与班级错题，记录纠错进度与练习次数。
- **个性化练习生成器**：根据错题记录自动组合练习卷，输出 PDF/在线答题，支持周期推送。
- **教学分析驾驶舱**：展示班级知识点正确率、分数分布、趋势变化，为备课提供依据。
- **集成与通知**：统一身份、权限、消息推送，与校内 LMS/教务系统对接。

## 处理流程概览
1. **上传试卷**：学生或教师通过网页/移动端上传图片，后端完成图像预处理与 OCR 解析。
2. **自动批改**：客观题立即得分；主观题读取教师批注内容，同步到系统；低置信度项提示人工确认。
3. **错题归档**：系统按题目、知识点、学生维度记录错题，形成个人错题本与班级错题清单。
4. **数据可视化**：周期性汇总各项指标，生成图表与报告供教师查看。
5. **练习卷推送**：按计划或手动触发生成专属练习，PDF 下载或在线练习。

## 数据模型要点
- **用户/班级**：教师-班级-学生的隶属关系。
- **考试/题目**：题目结构包含题号、题型、答案、知识点标签、评分规则。
- **提交/作答**：每次试卷提交的题目作答记录、OCR 原始数据、批改状态。
- **错题**：指向作答与题目，记录形成时间、最近出现时间、练习次数。
- **练习任务**：个性化练习的生成配置、PDF 地址、完成状态。

## 技术栈
- **后端**：FastAPI + SQLModel + SQLite，OCR 使用 EasyOCR，图像处理依赖 OpenCV/Pillow。
- **前端**：Vite + React + TypeScript + Ant Design，采用中文界面与数据可视化。
- **PDF 生成**：ReportLab 渲染练习卷。
- **部署建议**：容器化部署（Docker），对象存储保存原始图片，使用 Celery/Redis 扩展异步识别能力。

## 安全合规
- 细粒度角色权限控制与操作审计。
- 敏感数据加密存储，传输 HTTPS。
- 提供数据脱敏导出及删除请求的处理流程。

## 交付路线
1. **试点版本**：完成 OCR 批改、错题本、练习卷、统计分析、中文前端界面。
2. **扩展阶段**：引入 AI 主观题点评、学习行为追踪、移动端小程序。
3. **全面上线**：接入校内账号体系、消息通知、智能推荐与学情预警。
